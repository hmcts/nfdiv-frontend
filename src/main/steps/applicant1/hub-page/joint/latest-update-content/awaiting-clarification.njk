{% from "govuk/components/button/macro.njk" import govukButton %}
{% from "common/download-link.njk" import downloadLink %}

<p class="govuk-body">{{ awaitingClarification.line1 }}</p>

{% for reason in awaitingClarification.coRefusalClarificationReasons %}
  {% set heading = reason + "ReasonHeading" %}
  {% set body = reason + "ReasonBody" %}

  <h4 class="govuk-heading-s">{{ awaitingClarification[heading] }}</h4>

  {% if awaitingClarification[body] is mapping %}
    {% set anchoredBody = downloadLink(awaitingClarification[body]) %}
    <p class="govuk-body">{{ anchoredBody }}</p>
  {% else %}
    <p class="govuk-body">{{ awaitingClarification[body] }}</p>
  {% endif %}
{% endfor %}

{% if awaitingClarification.coRefusalClarificationAdditionalInfo %}
  <h4 class="govuk-heading-s">{{ awaitingClarification.courtsComments }}</h4>
  <p class="govuk-body">{{ awaitingClarification.coRefusalClarificationAdditionalInfo }}</p>
{% endif %}

<p class="govuk-body">{{ awaitingClarification.bothCanProvide }}</p>
<p class="govuk-body">{{ awaitingClarification.line3.part1 }}
  <a class="govuk-link" href={{ awaitingClarification.line3.link }}
  download={{ awaitingClarification.line3.downloadReference }}>
  {{ awaitingClarification.line3.part2 }}</a>{{ awaitingClarification.line3.part3 }}
</p>
<h4 class="govuk-heading-s">{{ awaitingClarification.next }}</h4>
<p class="govuk-body">{{ awaitingClarification.line4 }}</p>
<p class="govuk-body">{{ awaitingClarification.line5 }}</p>
{{ govukButton({
  text: awaitingClarification.buttonText,
  href: awaitingClarification.buttonLink,
  preventDoubleClick: true
}) }}
